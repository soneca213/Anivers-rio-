<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>17 Anos - Tha√≠s Vit√≥ria</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Pinyon+Script&family=Montserrat:wght@300;400;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #7a00ff;
            --secondary: #c400ff;
            --dark: #12001c;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            min-height: 100vh;
            background: radial-gradient(circle at center, #2a003f, #12001c);
            font-family: 'Montserrat', sans-serif;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* LUZ DE FUNDO PULSANTE */
        #luzBatida {
            position: fixed;
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(196, 0, 255, 0.4) 0%, rgba(122, 0, 255, 0) 70%);
            border-radius: 50%;
            filter: blur(80px);
            z-index: 0;
            pointer-events: none;
            display: none; /* S√≥ aparece ap√≥s o play */
        }

        /* CONTAINER ENVELOPE */
        .wrapper-total {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
            z-index: 10;
            transition: all 0.6s ease;
            cursor: pointer;
        }

        .wrapper-total.fade-out {
            opacity: 0;
            transform: scale(0.8);
            pointer-events: none;
        }

        .envelope {
            position: relative;
            width: 300px;
            height: 200px;
            background-color: #3d005e;
            perspective: 1000px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.8);
        }

        .envelope::before {
            content: "";
            position: absolute;
            top: 0; left: 0;
            z-index: 3;
            border-left: 150px solid transparent;
            border-right: 150px solid transparent;
            border-top: 100px solid var(--primary);
            transform-origin: top;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .envelope::after {
            content: "";
            position: absolute;
            bottom: 0; left: 0;
            z-index: 2;
            border-left: 150px solid transparent;
            border-right: 150px solid transparent;
            border-bottom: 100px solid #4b0082;
        }

        .envelope.open::before { transform: rotateX(180deg); z-index: 0; }

        .instrucao {
            color: white;
            font-weight: bold;
            letter-spacing: 3px;
            font-size: 0.9rem;
            text-align: center;
            text-shadow: 0 0 10px var(--primary);
            animation: piscar 1.5s infinite;
            text-transform: uppercase;
        }

        @keyframes piscar { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }

        /* CART√ÉO DE CONVITE */
        .card-luxo {
            position: fixed;
            display: none;
            z-index: 20;
            width: 90%;
            max-width: 450px;
            max-height: 85vh;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 35px;
            padding: 30px 20px;
            flex-direction: column;
            gap: 15px;
            text-align: center;
            border: 3px solid var(--primary);
            box-shadow: 0 0 30px rgba(122, 0, 255, 0.5);
            overflow-y: auto;
            animation: aparecer 1.2s ease-out forwards;
        }

        @keyframes aparecer {
            from { opacity: 0; transform: translateY(50px) scale(0.9); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .idade { font-family: 'Playfair Display', serif; font-size: 1.5rem; letter-spacing: 6px; color: #7b1fa2; }
        .nome {
            font-family: 'Pinyon Script', cursive;
            font-size: 4rem;
            line-height: 1;
            background: linear-gradient(90deg, #6a00ff, #c400ff, #6a00ff);
            background-size: 200% auto;
            color: transparent;
            -webkit-background-clip: text;
            background-clip: text;
            animation: brilhoNome 4s linear infinite;
            margin: 10px 0;
        }

        @keyframes brilhoNome { 0% { background-position: 0% center; } 100% { background-position: 200% center; } }
        .infos { font-size: 1.1rem; line-height: 1.4; color: #333; background: #f8f0ff; padding: 15px; border-radius: 20px; }
        .infos b { display: block; color: #7b1fa2; font-size: 1.2rem; margin: 5px 0; }
        
        button { padding: 15px; background: linear-gradient(45deg, #7b1fa2, #c400ff); color: white; border: none; border-radius: 50px; font-weight: 700; cursor: pointer; transition: 0.3s; width: 80%; margin: 0 auto; }
        input { padding: 12px; border: none; border-bottom: 2px solid #aa00ff; background: transparent; text-align: center; width: 80%; margin: 10px auto; outline: none; }

        /* ESTRELAS */
        #sky { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }
        .star { position: absolute; transition: transform 0.1s ease-out; }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }
    </style>
</head>
<body>

    <div id="luzBatida"></div>
    <div id="sky"></div>

    <audio id="musica" loop crossorigin="anonymous">
        <source src="AUD-20260223-WA0003.mp3" type="audio/mpeg">
    </audio>

    <div class="wrapper-total" id="envelopeWrapper" onclick="iniciar()">
        <div class="envelope" id="envelopeAnim"></div>
        <div class="instrucao">TOQUE PARA ABRIR</div>
    </div>

    <div class="card-luxo" id="convite">
        <p class="idade">17 ANOS</p>
        <h1 class="nome">Tha√≠s Vit√≥ria</h1>
        <div class="infos">
            üìÖ <b> 18 DE MAR√áO DE 2026</b>
            ‚è∞ <b>√ÄS 18:00 HORAS</b>
        </b> At√© 20:00 </b>
            üìç <b>RUA DO CASAR√ÉO, N¬∫ 43 </b>
        </div>
        <input type="text" id="nomeConvidado" placeholder="Seu nome completo">
        <button onclick="confirmar(true)">CONFIRMAR PRESEN√áA</button>
    </div>

    <script>
        let audioCtx, analyser, dataArray;

        function iniciar() {
            const wrapper = document.getElementById('envelopeWrapper');
            const env = document.getElementById('envelopeAnim');
            const card = document.getElementById('convite');
            const som = document.getElementById('musica');
            const luz = document.getElementById('luzBatida');

            // Inicia √Åudio e Visualizador
            som.play();
            setupAudio(som);
            
            luz.style.display = 'block';
            env.classList.add('open');

            setTimeout(() => {
                wrapper.classList.add('fade-out');
                setTimeout(() => {
                    wrapper.style.display = 'none';
                    card.style.display = 'flex';
                    chuvaDeEstrelas();
                }, 600);
            }, 800);
        }

        function setupAudio(audioElement) {
            audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            const source = audioCtx.createMediaElementSource(audioElement);
            analyser = audioCtx.createAnalyser();
            source.connect(analyser);
            analyser.connect(audioCtx.destination);
            analyser.fftSize = 128;
            dataArray = new Uint8Array(analyser.frequencyBinCount);
            renderBatida();
        }

        function renderBatida() {
            analyser.getByteFrequencyData(dataArray);
            
            // Foca nos graves (primeiras barras do array)
            let volume = dataArray[2]; 
            let scale = 1 + (volume / 200);
            let brilho = volume / 255;

            // Pulsa a luz de fundo
            const luz = document.getElementById('luzBatida');
            luz.style.transform = `scale(${scale})`;
            luz.style.opacity = 0.2 + brilho;

            // Faz as estrelas pulsarem (escala e brilho)
            const estrelas = document.querySelectorAll('.star');
            estrelas.forEach(s => {
                s.style.filter = `drop-shadow(0 0 ${volume/10}px white)`;
                s.style.transform = `scale(${0.5 + (volume/150)})`;
            });

            requestAnimationFrame(renderBatida);
        }

        function chuvaDeEstrelas() {
            const sky = document.getElementById('sky');
            const cores = ['#6a00ff', '#c400ff', '#ffffff'];
            setInterval(() => {
                const s = document.createElement('div');
                s.className = 'star';
                s.innerHTML = "‚ú¶";
                s.style.left = Math.random() * 100 + "vw";
                s.style.top = "-20px";
                s.style.color = cores[Math.floor(Math.random() * cores.length)];
                s.style.fontSize = (Math.random() * 15 + 10) + "px";
                
                // Anima√ß√£o de queda
                const duration = Math.random() * 3 + 2;
                s.style.animation = `fall ${duration}s linear forwards`;
                
                sky.appendChild(s);
                setTimeout(() => s.remove(), duration * 1000);
            }, 200);
        }

        function confirmar(vai) {
            const nome = document.getElementById("nomeConvidado").value;
            if(!nome){ alert("Digite seu nome!"); return; }
            window.open(`https://wa.me/558189659847?text=Confirmado! ${nome}`, "_blank");
        }
    </script>
</body>
</html>
